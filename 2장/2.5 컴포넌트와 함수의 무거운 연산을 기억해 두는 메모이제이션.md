# 🧐 컴포넌트와 함수의 무거운 연산을 기억해 두는 메모이제이션

#### 주장 1: 섣부른 최적화는 독이다, 꼭 필요한 곳에만 메모이제이션을 추가하자

메모이제이션도 어디까지나 비용이 드는 작업이므로 최적화에 대한 비용을 지불 할 때는 항상 신중해야 한다고 주장

```jsx
function sum(a, b) {
  return a + b;
}
```

위와 같이 매우 간단한 연산을 수행하는 함수가 있다고 가정해 보자.
이 결과를 메모이제이션해 두는 게 좋을까?
아니면 매번 새로운 계산을 하는게 좋을까?
예제는 극단적이긴 하지만 대부분의 가벼운 작업 자체는 메모이제이션해서 자바스크립트 메모리 어딘가에 두었다가 그것을 다시 꺼내오는 것보다는 매번 이 작업을 수행해 결과를 반환하는 것이 더 빠를 수도 있다.

메모이제이션에도 비용이 든다. 값을 비교하고 렌더링 또는 재계산이 필요한지 확인하는 작업, 그리고 이전에 결과물을 저장해 두었다가 다시 꺼내와야 한다는 두 가지 비용이 있다.
항상 메모이제이션은 신중하게 접근해야 하며 섣부른 최적화는 항상 경계해야 한다.

메모이제이션이 선택권으로 주어졌다는 것은 은탄환이 아니라는 것이다.

#### 주장 2: 렌더링 과정의 비용은 비싸다, 모조리 메모이제이션해 버리자

컴포넌트의 복잡성이 증가하는 상황에서 이 기조를 유지할 수 있을까?
많은 개발자들은 생각보다 최적화나 성능 향상에 쏟을 시간이 많지 않다는 것.
잘못된 memo로 지불되는 비용 : props에 대한 얕은 비교가 발생하면서 지불해야 하는 비용.
기본적으로 리액트의 재조정 알고리즘 덕분에 결과물은 어떻게든 저장하고 있다. 따라서 우리가 지불해야 하는 비용은 props에 대한 얕은 비교 뿐인 것이다.
반면 memo를 하지 않았을 때 발생하는 문제는 다음과 같다.

- 렌더링을 함으로써 발생하는 비용
- 컴포넌트 내부 복잡한 로직의 반복 실행
- 위의 두 경우가 자식 컴포넌트 까지 실행된다.
- 기존 트리와 새로운 트리의 비교 비용

#### 결론 및 정리

리액트를 배우고 있는 단계이거나, 깊게 이해하고 싶고, 그럴 시간적 여유가 있다면 섣부른 최적화를 하지 않고, 어느 지점에서 성능상 이점을 누릴 수 있는지 살펴보는 식으로 적용해야 한다.
현업에서 리액트를 사용하고 있거나, 시간적 여유가 없다면 일단 의심스러운 곳에 모두 적용할 것을 권장한다.
